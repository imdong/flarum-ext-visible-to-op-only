(()=>{var o={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},d:(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(o,e)=>Object.prototype.hasOwnProperty.call(o,e),r:o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}},e={};(()=>{"use strict";o.r(e),o.d(e,{extPrefix:()=>n,key:()=>s,trans:()=>i});const t=flarum.core.compat["common/app"];var r=o.n(t),n="imdong-visible-to-op-only";function s(o){return n+"."+o.replace(/^\.*/,"")}function i(o,e){return void 0===e&&(e={}),r().translator.trans(s(o),e)}const a=flarum.core.compat["forum/app"];var c=o.n(a);const p=flarum.core.compat["common/extend"],u=flarum.core.compat["forum/components/ReplyComposer"];var l=o.n(u);const d=flarum.core.compat["common/models/Post"];var f=o.n(d);function y(o,e){return o.replace(/<onlyopsee>([\s\S]*?)<\/onlyopsee>/gi,(function(o,t){return v(e,t)}))}function v(o,e){var t=i(o?"forum.only_op_see":"forum.hidden_content_only_op_see");return!app.session.user.attribute("canVisibleToOpPermissionsViewButton")&&e?""+(e||""):'<div class="onlyopsee" data-title-content="'+t+'" >'+(e||"")+"</div>"}const b=flarum.core.compat["common/components/TextEditor"];var _=o.n(b);const P=flarum.core.compat["common/components/TextEditorButton"];var x=o.n(P);const O=flarum.core.compat["common/utils/styleSelectedText"];var T=o.n(O),g={prefix:"[OP]",suffix:"[/OP]",trimFirst:!0};c().initializers.add(n,(function(){(0,p.extend)(_().prototype,"toolbarItems",(function(o){var e=this;app.session.user.attribute("canVisibleToOpPermissionsViewButton")&&(app.composer.body.attrs.discussion||app.composer.body.attrs.post)&&o.add("only-op-see",m(x(),{onclick:function(){return T()(e.attrs.composer.editor.el,g)},icon:"fas fa-user-shield"},i("forum.button_tooltip_only_op_see")))})),(0,p.override)(f().prototype,"contentHtml",(function(o,e){return this.attribute("canViewPosts")?y(o(),this.attribute("canViewHidePosts")):v(!1)})),(0,p.override)(s9e.TextFormatter,"preview",(function(o,e,t){o(e,t),t.innerHTML=y(t.innerHTML,!0)})),(0,p.override)(l().prototype,"onsubmit",(function(o,e){if(/\[OP\]\s*\[\/OP\]/.test(e))return c().alerts.show({type:"error"},i("forum.editor_empty_tips")),!1;o()}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map